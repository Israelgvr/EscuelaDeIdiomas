"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Prisma_1 = global[Symbol.for('ioc.use')]("Adonis/Addons/Prisma");
class NotasNivelController {
    async obtenerNivelesA({ response }) {
        try {
            const niveles = await Prisma_1.prisma.nivel.findMany({
                include: {
                    idioma: true,
                    libros: true,
                    cursos: true,
                },
            });
            return response.status(200).json(niveles);
        }
        catch (error) {
            return response.status(500).json({ message: 'Error al obtener los niveles' });
        }
    }
    async obtenerNivelesB({ response }) {
        try {
            const niveles = await Prisma_1.prisma.nivel.findMany({
                include: {
                    idioma: true,
                    libros: true,
                    cursos: true,
                },
            });
            const nivelesFormateados = niveles.map(nivel => ({
                id: nivel.id,
                nombre: nivel.nombre,
                codigo: nivel.codigo,
                posicion: nivel.posicion,
                idiomaId: nivel.idiomaId,
                librosId: nivel.libros.map(libro => libro.id),
                cursosId: nivel.cursos.map(curso => curso.id),
                createdAt: nivel.createdAt,
                updatedAt: nivel.updatedAt,
                idioma: {
                    id: nivel.idioma.id,
                    nombre: nivel.idioma.nombre,
                    codigo: nivel.idioma.codigo,
                    createdAt: nivel.idioma.createdAt,
                    updatedAt: nivel.idioma.updatedAt,
                },
                libros: nivel.libros.map(libro => ({
                    id: libro.id,
                    nombre: libro.nombre,
                    codigo: libro.codigo,
                    createdAt: libro.createdAt,
                    updatedAt: libro.updatedAt,
                })),
                cursos: nivel.cursos.map(curso => ({
                    id: curso.id,
                    nombre: curso.nombre,
                    activo: curso.activo,
                    modalidadId: curso.modalidadId,
                    idiomaId: curso.idiomaId,
                    horaInicial: curso.horaInicial,
                    horaFinal: curso.horaFinal,
                    createdAt: curso.createdAt,
                    updatedAt: curso.updatedAt,
                })),
            }));
            return response.status(200).json(nivelesFormateados);
        }
        catch (error) {
            return response.status(500).json({ message: 'Error al obtener los niveles' });
        }
    }
    async obtenerNivelesN({ response }) {
        try {
            const niveles = await Prisma_1.prisma.nivel.findMany({
                include: {
                    libros: true,
                },
            });
            const librosPorNivel = niveles.map(nivel => nivel.libros);
            return response.status(200).json(librosPorNivel);
        }
        catch (error) {
            return response.status(500).json({ message: 'Error al obtener los niveles' });
        }
    }
    async obtenerNiveles({ response }) {
        try {
            const niveles = await Prisma_1.prisma.nivel.findMany({
                select: {
                    id: true,
                    nombre: true,
                    codigo: true,
                    libros: {
                        select: {
                            id: true,
                            nombre: true,
                            codigo: true,
                        },
                    },
                },
            });
            return response.status(200).json(niveles);
        }
        catch (error) {
            return response.status(500).json({ message: 'Error al obtener los niveles' });
        }
    }
}
exports.default = NotasNivelController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm90YXNOaXZlbENvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJOb3Rhc05pdmVsQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVFQUFrRDtBQUVsRCxNQUFxQixvQkFBb0I7SUFDaEMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLFFBQVEsRUFBRTtRQUN2QyxJQUFJO1lBQ0YsTUFBTSxPQUFPLEdBQUcsTUFBTSxlQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztnQkFDMUMsT0FBTyxFQUFFO29CQUNQLE1BQU0sRUFBRSxJQUFJO29CQUNaLE1BQU0sRUFBRSxJQUFJO29CQUNaLE1BQU0sRUFBRSxJQUFJO2lCQUNiO2FBQ0YsQ0FBQyxDQUFDO1lBRUgsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMzQztRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxDQUFDLENBQUM7U0FDL0U7SUFDSCxDQUFDO0lBRU0sS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLFFBQVEsRUFBRTtRQUN2QyxJQUFJO1lBQ0YsTUFBTSxPQUFPLEdBQUcsTUFBTSxlQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztnQkFDMUMsT0FBTyxFQUFFO29CQUNQLE1BQU0sRUFBRSxJQUFJO29CQUNaLE1BQU0sRUFBRSxJQUFJO29CQUNaLE1BQU0sRUFBRSxJQUFJO2lCQUNiO2FBQ0YsQ0FBQyxDQUFDO1lBRUgsTUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDL0MsRUFBRSxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNaLE1BQU0sRUFBRSxLQUFLLENBQUMs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RyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLDhCQUE4QixFQUFFLENBQUMsQ0FBQztTQUMvRTtJQUNILENBQUM7SUFFTSxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFO1FBQ3RDLElBQUk7WUFDRixNQUFNLE9BQU8sR0FBRyxNQUFNLGVBQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO2dCQUMxQyxNQUFNLEVBQUU7b0JBQ04sRUFBRSxFQUFFLElBQUk7b0JBQ1IsTUFBTSxFQUFFLElBQUk7b0JBQ1osTUFBTSxFQUFFLElBQUk7b0JBQ1osTUFBTSxFQUFFO3dCQUNOLE1BQU0sRUFBRTs0QkFDTixFQUFFLEVBQUUsSUFBSTs0QkFDUixNQUFNLEVBQUUsSUFBSTs0QkFDWixNQUFNLEVBQUUsSUFBSTt5QkFDYjtxQkFDRjtpQkFDRjthQUNGLENBQUMsQ0FBQztZQUVILE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDM0M7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsQ0FBQyxDQUFDO1NBQy9FO0lBQ0gsQ0FBQztDQUtGO0FBaEhELHVDQWdIQyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQGlvYzpBZG9uaXMvQWRkb25zL1ByaXNtYSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90YXNOaXZlbENvbnRyb2xsZXIge1xuICBwdWJsaWMgYXN5bmMgb2J0ZW5lck5pdmVsZXNBKHsgcmVzcG9uc2UgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuaXZlbGVzID0gYXdhaXQgcHJpc21hLm5pdmVsLmZpbmRNYW55KHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGlkaW9tYTogdHJ1ZSxcbiAgICAgICAgICBsaWJyb3M6IHRydWUsXG4gICAgICAgICAgY3Vyc29zOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoMjAwKS5qc29uKG5pdmVsZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBhbCBvYnRlbmVyIGxvcyBuaXZlbGVzJyB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgb2J0ZW5lck5pdmVsZXNCKHsgcmVzcG9uc2UgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuaXZlbGVzID0gYXdhaXQgcHJpc21hLm5pdmVsLmZpbmRNYW55KHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGlkaW9tYTogdHJ1ZSxcbiAgICAgICAgICBsaWJyb3M6IHRydWUsXG4gICAgICAgICAgY3Vyc29zOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG5pdmVsZXNGb3JtYXRlYWRvcyA9IG5pdmVsZXMubWFwKG5pdmVsID0+ICh7XG4gICAgICAgIGlkOiBuaXZlbC5pZCxcbiAgICAgICAgbm9tYnJlOiBuaXZlbC5ub21icmUsXG4gICAgICAgIGNvZGlnbzogbml2ZWwuY29kaWdvLFxuICAgICAgICBwb3NpY2lvbjogbml2ZWwucG9zaWNpb24sXG4gICAgICAgIGlkaW9tYUlkOiBuaXZlbC5pZGlvbWFJZCxcbiAgICAgICAgbGlicm9zSWQ6IG5pdmVsLmxpYnJvcy5tYXAobGlicm8gPT4gbGlicm8uaWQpLFxuICAgICAgICBjdXJzb3NJZDogbml2ZWwuY3Vyc29zLm1hcChjdXJzbyA9PiBjdXJzby5pZCksXG4gICAgICAgIGNyZWF0ZWRBdDogbml2ZWwuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IG5pdmVsLnVwZGF0ZWRBdCxcbiAgICAgICAgaWRpb21hOiB7XG4gICAgICAgICAgaWQ6IG5pdmVsLmlkaW9tYS5pZCxcbiAgICAgICAgICBub21icmU6IG5pdmVsLmlkaW9tYS5ub21icmUsXG4gICAgICAgICAgY29kaWdvOiBuaXZlbC5pZGlvbWEuY29kaWdvLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbml2ZWwuaWRpb21hLmNyZWF0ZWRBdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5pdmVsLmlkaW9tYS51cGRhdGVkQXQsXG4gICAgICAgIH0sXG4gICAgICAgIGxpYnJvczogbml2ZWwubGlicm9zLm1hcChsaWJybyA9PiAoe1xuICAgICAgICAgIGlkOiBsaWJyby5pZCxcbiAgICAgICAgICBub21icmU6IGxpYnJvLm5vbWJyZSxcbiAgICAgICAgICBjb2RpZ286IGxpYnJvLmNvZGlnbyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGxpYnJvLmNyZWF0ZWRBdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGxpYnJvLnVwZGF0ZWRBdCxcbiAgICAgICAgfSkpLFxuICAgICAgICBjdXJzb3M6IG5pdmVsLmN1cnNvcy5tYXAoY3Vyc28gPT4gKHtcbiAgICAgICAgICBpZDogY3Vyc28uaWQsXG4gICAgICAgICAgbm9tYnJlOiBjdXJzby5ub21icmUsXG4gICAgICAgICAgYWN0aXZvOiBjdXJzby5hY3Rpdm8sXG4gICAgICAgICAgbW9kYWxpZGFkSWQ6IGN1cnNvLm1vZGFsaWRhZElkLFxuICAgICAgICAgIGlkaW9tYUlkOiBjdXJzby5pZGlvbWFJZCxcbiAgICAgICAgICBob3JhSW5pY2lhbDogY3Vyc28uaG9yYUluaWNpYWwsXG4gICAgICAgICAgaG9yYUZpbmFsOiBjdXJzby5ob3JhRmluYWwsXG4gICAgICAgICAgY3JlYXRlZEF0OiBjdXJzby5jcmVhdGVkQXQsXG4gICAgICAgICAgdXBkYXRlZEF0OiBjdXJzby51cGRhdGVkQXQsXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cygyMDApLmpzb24obml2ZWxlc0Zvcm1hdGVhZG9zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgYWwgb2J0ZW5lciBsb3Mgbml2ZWxlcycgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIG9idGVuZXJOaXZlbGVzTih7IHJlc3BvbnNlIH0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgbml2ZWxlcyA9IGF3YWl0IHByaXNtYS5uaXZlbC5maW5kTWFueSh7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBsaWJyb3M6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGlicm9zUG9yTml2ZWwgPSBuaXZlbGVzLm1hcChuaXZlbCA9PiBuaXZlbC5saWJyb3MpO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDIwMCkuanNvbihsaWJyb3NQb3JOaXZlbCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGFsIG9idGVuZXIgbG9zIG5pdmVsZXMnIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBvYnRlbmVyTml2ZWxlcyh7IHJlc3BvbnNlIH0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgbml2ZWxlcyA9IGF3YWl0IHByaXNtYS5uaXZlbC5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5vbWJyZTogdHJ1ZSxcbiAgICAgICAgICBjb2RpZ286IHRydWUsXG4gICAgICAgICAgbGlicm9zOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5vbWJyZTogdHJ1ZSxcbiAgICAgICAgICAgICAgY29kaWdvOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoMjAwKS5qc29uKG5pdmVsZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBhbCBvYnRlbmVyIGxvcyBuaXZlbGVzJyB9KTtcbiAgICB9XG4gIH1cblxuXG5cblxufVxuIl19